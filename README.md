# Проект "Распознавание результатов анализов"

Куратор - Бондаренко Денис

Участники: Басова Юлия, Вишнякова Алиса, Жильцова Марина

Задачи проекта:

1. Предобработка изображений: Нормализация изображений: изменение яркости, контраста,
устранение шумов.

2. Распознавание текста (+ выравнивание)
- Использование OCR для извлечения текста с изображений (пример либы: Tesseract)
- Постобработка текста: исправление ошибок OCR, удаление лишних символов, разделение текста
на строки и столбцы.

3. Извлечение данных:

Анализ текста для выделения ключевых элементов:
- Название показателя (например, "Глюкоза", "Холестерин").
- Значение показателя (например, "5.2", "120").
- Единица измерения (например, "ммоль/л", "мг/дл").
- Дата сдачи анализа
- Название клиники

4. Доработки:
- Учет вариативности в наименованиях показателей
- Разнообразие единиц измерения (Один и тот же показатель может быть выражен в различных
единицах измерения, что требует дополнительной обработки для приведения данных к единому
стандарту)
- Результаты анализов могут быть представлены в рукописном виде или в форматах, которые не
соответствуют стандартной структуре


# Объяснение работы кода

## main.py
Основной файл проекта, в котором указывается путь до изображения и применяются основные функции: извлечения текста и отфильтровывания нежелательных символов из извлеченного текста.
```
result_text = get_text(image_path) # processing of image, string in result

print(result_text)
print(filter_text(result_text)) # filter text from extra symbols
```

## tesseract_test.py
Файл с объединением функций pytesseract и функций предобработки изображения в функции get_text.

## preprocess_of_image.py
Файл, содержащий в себе функции, отвечающие за предобработку изображений.
### get_parametres(img)
С помощью функций из библиотеки numpy извлекает и возвращает среднее значение и стандартное отклонение яркости изображения img 
### analyze_image(mean_brightness, std_brightness)
На основе переданных значений mean_brightness(среднее значение) и std_brightness(стандартное отелонение) определяется, какой тип обработки изображения требуется применить и с какими параметрами:
- adjust_type = 0 - изменения не требуются
- adjust_type = 1 - изменить только яркость
- adjust_type = 2 - изменнить только контрастность
- adjust_type = 3 - изменить яркость и контрастность
Возвращает contrast_adjustment, brightness_adjustment, adjust_type.
### adaptive_bilateral_filter(image)
Применяет bilateralFilter библиотеки OpenCV для избавления от шума на изображении, индивидуально вычисляя лучшие параметры для фильтра
### make_image(img, adjust_type=0,brightness_adjustment=1, contrast_adjustment=1)
Используя функции ImageEnhance, реализует подобранный adjust_type и применяет adaptive_bilateral_filter, осуществляя предобработку изображения, если изменения необходимы. Возвращает обработанное изображение.
 

## ustranenie_in_text.py
Содержит функцию filter_text, в которой, используя библиотеки nltk и re для работы с текстом, переданный в функцию текст фильтруется от лишних символов и слов. Возвращает строку с обработанным текстом.
